# MineWorld-SDK v0.1 - Foundation Milestone

**Version**: 0.1.0  
**Status**: 🚧 Planning  
**Start Date**: 2025-10-18  
**Target Duration**: 2-3 months  
**Depends On**: MineWorld v0.1, BlockCore v0.1, BlockCore-SDK v0.1  
**Branch**: `0.1.0/feature/*`

---

## Table of Contents

1. [Discovery Phase](#1-discovery-phase)
2. [Initiation & Planning](#2-initiation--planning)
3. [Project Definition](#3-project-definition)
4. [Preliminary Design](#4-preliminary-design)
5. [Implementation Plan](#5-implementation-plan)
6. [Acceptance Criteria](#6-acceptance-criteria)

---

## 1. Discovery Phase

### 1.1 Goals (North Star)

**Primary Goal**: Enable MineWorld content creators to scaffold and package game-specific mods in under 10 minutes.

**Specific Goals**:
- ✅ Install SDK CLI globally
- ✅ Scaffold a MineWorld plugin with `mwtool new`
- ✅ Scaffold a data pack (custom blocks)
- ✅ Generated projects have MineWorld-specific manifests
- ✅ Include MineWorld gameplay examples

### 1.2 Success Criteria

**Must Have (MVP)**:
- [ ] CLI tool installable via `dotnet tool install -g MineWorld.SDK`
- [ ] `mwtool new plugin <name>` command works (Lua)
- [ ] `mwtool new data <name>` command works (custom blocks)
- [ ] Generated manifests validate against MineWorld schemas
- [ ] Plugin template includes MineWorld-specific examples (/home command)
- [ ] Data template includes custom block definition
- [ ] Works on Windows, Linux, macOS

**Should Have**:
- [ ] `--game-version` flag to target specific MineWorld version
- [ ] Auto-detect MineWorld installation path
- [ ] Generate with example assets (placeholder textures)

**Nice to Have**:
- [ ] `mwtool new resource` for texture packs
- [ ] Recipe template (shaped/shapeless)
- [ ] Biome configuration template

### 1.3 Non-Goals (Out of Scope for v0.1)

❌ Validation command (comes in v0.2)  
❌ Pack/install commands  
❌ Multiple data types (only blocks in v0.1)  
❌ Resource pack templates  
❌ Shader pack templates  
❌ Hot-reload / watch mode  

### 1.4 Stakeholders

| Role | Responsibility |
|------|---------------|
| **SDK Developer** | Implement CLI, templates, schemas |
| **Modder** | Test scaffolding, provide feedback |
| **MineWorld Team** | Define mod API contracts |

---

## 2. Initiation & Planning

### 2.1 Repository Structure

```
MineWorld-SDK/
  ├─ src/
  │   └─ MineWorld.SDK.CLI/
  │       ├─ Commands/
  │       │   ├─ NewCommand.cs
  │       │   └─ VersionCommand.cs
  │       ├─ Templates/
  │       │   ├─ plugin-lua/
  │       │   │   ├─ manifest.json.template
  │       │   │   ├─ main.lua.template
  │       │   │   └─ README.md.template
  │       │   └─ data-blocks/
  │       │       ├─ manifest.json.template
  │       │       ├─ data/
  │       │       │   └─ blocks/
  │       │       │       └─ example.json.template
  │       │       └─ README.md.template
  │       ├─ Utils/
  │       │   ├─ TemplateEngine.cs
  │       │   └─ ConsoleHelper.cs
  │       └─ Program.cs
  ├─ schemas/
  │   ├─ manifest.mw.schema.json
  │   ├─ plugin.mw.schema.json
  │   ├─ blocks.schema.json
  │   ├─ items.schema.json
  │   └─ recipes.schema.json
  ├─ templates/
  │   ├─ plugin-lua/
  │   └─ data-blocks/
  ├─ docs/
  │   └─ planning/
  ├─ tests/
  │   └─ MineWorld.SDK.CLI.Tests/
  ├─ examples/
  │   ├─ plugin-home-teleport/
  │   └─ data-copper-ore/
  ├─ MineWorld-SDK.sln
  ├─ README.md
  ├─ LICENSE
  └─ .gitignore
```

### 2.2 Technology Stack

| Component | Technology | Purpose |
|-----------|-----------|---------|
| **CLI Framework** | System.CommandLine | Command parsing |
| **Templates** | Scriban | Template rendering |
| **Packaging** | NuGet (.nupkg) | Distribution as dotnet tool |
| **Testing** | xUnit | CLI integration tests |

### 2.3 Relationship with BlockCore-SDK

MineWorld-SDK **extends** BlockCore-SDK by:
- Using same CLI framework (System.CommandLine)
- Adding MineWorld-specific templates
- Adding MineWorld-specific schemas (blocks, items, recipes)
- Using `mwtool` command instead of `blockcore`

### 2.4 Risk Assessment

| Risk | Probability | Impact | Mitigation |
|------|------------|--------|-----------|
| MineWorld API changes | Medium | High | Pin to MineWorld versions |
| Confusion with BlockCore-SDK | Low | Medium | Clear branding (mwtool vs blockcore) |
| Template maintenance | Medium | Medium | Keep templates minimal in v0.1 |

---

## 3. Project Definition

### 3.1 CLI Commands (v0.1)

#### `mwtool new plugin <name>`

**Purpose**: Scaffold a MineWorld gameplay plugin

**Syntax**:
```bash
mwtool new plugin <NAME> [OPTIONS]
```

**Options**:
- `--lang <lua|js>` - Language (default: lua, js not in v0.1)
- `--output <PATH>` - Output directory
- `--author <NAME>` - Author name

**Example**:
```bash
mwtool new plugin HomeTP --lang lua
```

**Output**:
```
Creating MineWorld plugin 'HomeTP'...
✓ Created directory: HomeTP/
✓ Generated manifest.json (MineWorld-specific)
✓ Generated main.lua (with /home example)
✓ Generated README.md

Plugin 'HomeTP' created successfully!

Next steps:
  1. cd HomeTP
  2. Edit main.lua to customize
  3. Copy to MineWorld/plugins/
  4. Test with /home command in-game

Learn more: https://mineworld.dev/modding/plugins
```

#### `mwtool new data <name>`

**Purpose**: Scaffold a MineWorld data pack

**Syntax**:
```bash
mwtool new data <NAME> [OPTIONS]
```

**Options**:
- `--type <blocks|items|recipes|biomes>` - Data type (default: blocks)
- `--output <PATH>` - Output directory
- `--author <NAME>` - Author name

**Example**:
```bash
mwtool new data CopperOre --type blocks
```

**Output**:
```
Creating MineWorld data pack 'CopperOre'...
✓ Created directory: CopperOre/
✓ Generated manifest.json
✓ Generated data/blocks/copper_ore.json (example block)
✓ Generated README.md

Data pack 'CopperOre' created successfully!

Next steps:
  1. cd CopperOre
  2. Edit data/blocks/copper_ore.json
  3. Add textures to assets/ (optional)
  4. Copy to MineWorld/datapacks/

Learn more: https://mineworld.dev/modding/data-packs
```

#### `mwtool --version`

**Output**:
```
MineWorld SDK v0.1.0
Modding toolkit for MineWorld

Engine compatibility: BlockCore v0.1+
Game compatibility: MineWorld v0.1+
```

---

### 3.2 Template Structures

#### Plugin Template (plugin-lua)

**Generated files**:
```
HomeTP/
  ├─ manifest.json
  ├─ main.lua
  └─ README.md
```

**manifest.json**:
```json
{
  "id": "{{ author }}:{{ name_lower }}",
  "name": "{{ name }}",
  "version": "0.1.0",
  "type": "plugin",
  "engine": "^0.5",
  "game": {
    "MineWorld": "^0.4"
  },
  "description": "A MineWorld plugin created with MineWorld SDK",
  "author": "{{ author }}",
  "license": "MIT",
  "entry": "main.lua",
  "side": "server",
  "permissions": [
    "commands.register",
    "players.teleport",
    "storage.kv"
  ],
  "capabilities": [
    "chat"
  ]
}
```

**main.lua** (MineWorld-specific example):
```lua
-- {{ name }} Plugin for MineWorld
-- Author: {{ author }}
-- Created with MineWorld SDK v{{ sdk_version }}

local homePositions = {}

function onLoad(ctx)
    print("[{{ name }}] Loading plugin...")
    
    -- Register /sethome command
    ctx:registerCommand("sethome", {}, function(c)
        local pos = c.player:getPosition()
        homePositions[c.player:getId()] = pos
        c:reply("Home position set at " .. pos.x .. ", " .. pos.y .. ", " .. pos.z)
    end, { permission = "player" })
    
    -- Register /home command
    ctx:registerCommand("home", {}, function(c)
        local playerId = c.player:getId()
        if homePositions[playerId] then
            c.player:teleport(homePositions[playerId])
            c:reply("Teleported home!")
        else
            c:reply("No home set. Use /sethome first.")
        end
    end, { permission = "player" })
    
    print("[{{ name }}] Plugin loaded successfully!")
    print("[{{ name }}] Commands: /sethome, /home")
end

function onEnable(ctx)
    print("[{{ name }}] Plugin enabled")
end

function onDisable(ctx)
    print("[{{ name }}] Saving home positions...")
    -- Save homePositions to storage here (v0.2+)
    print("[{{ name }}] Plugin disabled")
end
```

#### Data Template (data-blocks)

**Generated files**:
```
CopperOre/
  ├─ manifest.json
  ├─ data/
  │   └─ blocks/
  │       └─ copper_ore.json
  ├─ assets/
  │   └─ textures/
  │       └─ blocks/
  │           └─ copper_ore.png (placeholder)
  └─ README.md
```

**data/blocks/copper_ore.json**:
```json
{
  "{{ namespace }}:copper_ore": {
    "displayName": "Copper Ore",
    "model": "cube_all",
    "textures": {
      "all": "{{ namespace }}:blocks/copper_ore"
    },
    "hardness": 3.0,
    "toolRequired": "pickaxe",
    "toolLevel": "stone",
    "drops": {
      "default": "{{ namespace }}:raw_copper",
      "fortune": {
        "1": { "item": "{{ namespace }}:raw_copper", "count": "2-3" },
        "2": { "item": "{{ namespace }}:raw_copper", "count": "2-4" },
        "3": { "item": "{{ namespace }}:raw_copper", "count": "2-5" }
      }
    },
    "tags": ["ore", "stone", "overworld"],
    "miningTime": {
      "hand": 15.0,
      "wooden_pickaxe": 7.5,
      "stone_pickaxe": 1.15,
      "iron_pickaxe": 0.75,
      "diamond_pickaxe": 0.6
    }
  }
}
```

---

## 4. Preliminary Design

### 4.1 CLI Architecture

```
┌──────────────────────────────────────────┐
│   MineWorld.SDK.CLI (Console App)       │
│                                          │
│  ┌────────────────────────────────────┐ │
│  │  System.CommandLine                │ │
│  │  - Parse mwtool commands           │ │
│  └────────────┬───────────────────────┘ │
│               │                          │
│  ┌────────────┴───────────────────────┐ │
│  │  NewCommand                        │ │
│  │  - Load MW-specific templates     │ │
│  │  - Add MW manifest fields         │ │
│  └────────────┬───────────────────────┘ │
│               │                          │
│  ┌────────────┴───────────────────────┐ │
│  │  TemplateEngine (Scriban)          │ │
│  │  - Render plugin/data templates   │ │
│  └────────────────────────────────────┘ │
└──────────────────────────────────────────┘
```

### 4.2 Template Variables (MineWorld-Specific)

**Input**:
```bash
mwtool new plugin HomeTP --author "Alice"
```

**Variables**:
```json
{
  "name": "HomeTP",
  "name_lower": "hometp",
  "namespace": "alice",
  "author": "Alice",
  "description": "A MineWorld plugin created with MineWorld SDK",
  "license": "MIT",
  "sdk_version": "0.1.0",
  "engine_version": "^0.5",
  "game_version": "^0.4",
  "date": "2025-10-18"
}
```

---

## 5. Implementation Plan

### 5.1 Phase 1: CLI Foundation (Week 1-2)

#### Tasks

- [ ] **Task 1.1**: Initialize MineWorld-SDK solution
  - [ ] Create solution and CLI project
  - [ ] Add System.CommandLine dependency
  - [ ] Configure as dotnet tool (mwtool command)
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 3 hours

- [ ] **Task 1.2**: Implement basic CLI
  - [ ] Program.cs with command routing
  - [ ] `--version` command (show MW + Engine versions)
  - [ ] `--help` generation
  - [ ] Console helpers (colors)
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 5 hours

- [ ] **Task 1.3**: Write CLI tests
  - [ ] Test --version output
  - [ ] Test --help output
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 3 hours

**Phase 1 Checkpoint**: CLI runs, displays version.

---

### 5.2 Phase 2: Plugin Template (Week 2-3)

#### Tasks

- [ ] **Task 2.1**: Create plugin-lua templates
  - [ ] manifest.json.template (MW-specific fields)
  - [ ] main.lua.template (home teleport example)
  - [ ] README.md.template
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 6 hours

- [ ] **Task 2.2**: Implement NewCommand (plugin)
  - [ ] Parse plugin arguments
  - [ ] Render templates with MW variables
  - [ ] Create directory structure
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 8 hours

- [ ] **Task 2.3**: Test plugin scaffolding
  - [ ] Integration test (full workflow)
  - [ ] Test with various options
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 4 hours

**Phase 2 Checkpoint**: `mwtool new plugin` works.

---

### 5.3 Phase 3: Data Pack Template (Week 3-4)

#### Tasks

- [ ] **Task 3.1**: Create data-blocks templates
  - [ ] manifest.json.template
  - [ ] data/blocks/example.json.template
  - [ ] Placeholder texture (16x16 PNG)
  - [ ] README.md.template
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 6 hours

- [ ] **Task 3.2**: Implement NewCommand (data)
  - [ ] Add `data` subcommand
  - [ ] `--type blocks` option
  - [ ] Render data pack templates
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 6 hours

- [ ] **Task 3.3**: Test data pack scaffolding
  - [ ] Integration tests
  - [ ] Validate generated JSON structure
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 3 hours

**Phase 3 Checkpoint**: `mwtool new data` works.

---

### 5.4 Phase 4: Packaging & Distribution (Week 4-5)

#### Tasks

- [ ] **Task 4.1**: Configure as dotnet tool
  - [ ] Set PackAsTool=true
  - [ ] Define command name ("mwtool")
  - [ ] Package metadata
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 2 hours

- [ ] **Task 4.2**: Create NuGet package
  - [ ] Build and pack
  - [ ] Test local installation
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 2 hours

- [ ] **Task 4.3**: Create standalone binaries
  - [ ] Publish self-contained (win/linux/osx)
  - [ ] Create archives
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 3 hours

- [ ] **Task 4.4**: Set up CI/CD
  - [ ] GitHub Actions workflow
  - [ ] Automated publishing
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 4 hours

**Phase 4 Checkpoint**: Installable via `dotnet tool install -g MineWorld.SDK`.

---

### 5.5 Phase 5: Examples & Documentation (Week 5-6)

#### Tasks

- [ ] **Task 5.1**: Create example mods
  - [ ] plugin-home-teleport (generate with SDK)
  - [ ] data-copper-ore (generate with SDK)
  - [ ] Test in MineWorld (if available)
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 6 hours

- [ ] **Task 5.2**: Write documentation
  - [ ] README with installation
  - [ ] Command reference
  - [ ] Quick start guide (10 minutes)
  - [ ] Block schema documentation
  - 🚧 **Status**: Not started
  - ⏱️ **Estimated**: 6 hours

**Phase 5 Checkpoint**: Complete documentation, working examples.

---

### 5.6 Total Time Estimate

| Phase | Tasks | Estimated Hours |
|-------|-------|----------------|
| Phase 1: CLI Foundation | 3 | 11h |
| Phase 2: Plugin Template | 3 | 18h |
| Phase 3: Data Template | 3 | 15h |
| Phase 4: Packaging | 4 | 11h |
| Phase 5: Examples & Docs | 2 | 12h |
| **Total** | **15** | **67h** |

**Estimated Duration**: 67 hours ≈ 3-4 weeks (at 20h/week)

---

## 6. Acceptance Criteria

### 6.1 Functional Requirements

- [ ] **FR1**: CLI installs globally via dotnet tool
  - ✅ **How to test**: `dotnet tool install -g MineWorld.SDK`
  - ✅ **Expected**: Installs without errors

- [ ] **FR2**: `mwtool --version` displays versions
  - ✅ **How to test**: Run command
  - ✅ **Expected**: Shows MW SDK, Engine, and Game versions

- [ ] **FR3**: `mwtool new plugin HomeTP` creates project
  - ✅ **How to test**: Run in empty directory
  - ✅ **Expected**: Creates HomeTP/ with manifest, main.lua, README

- [ ] **FR4**: Generated plugin manifest has MW fields
  - ✅ **How to test**: Check manifest.json
  - ✅ **Expected**: Has "game": {"MineWorld": "^0.4"} field

- [ ] **FR5**: Plugin Lua includes home teleport example
  - ✅ **How to test**: Inspect main.lua
  - ✅ **Expected**: Contains /sethome and /home commands

- [ ] **FR6**: `mwtool new data CopperOre` creates data pack
  - ✅ **How to test**: Run command
  - ✅ **Expected**: Creates data pack with blocks/ folder

- [ ] **FR7**: Generated block JSON has MW-specific fields
  - ✅ **How to test**: Check copper_ore.json
  - ✅ **Expected**: Has hardness, toolRequired, drops fields

### 6.2 Quality Requirements

- [ ] **QR1**: Works on Windows, Linux, macOS
  - ✅ **How to test**: Install and run on all platforms
  - ✅ **Expected**: Identical behavior

- [ ] **QR2**: CLI tests pass
  - ✅ **How to test**: `dotnet test`
  - ✅ **Expected**: All green

- [ ] **QR3**: No compiler warnings
  - ✅ **How to test**: `dotnet build -c Release`
  - ✅ **Expected**: Zero warnings

### 6.3 Documentation Requirements

- [ ] **DR1**: README explains installation and usage
  - ✅ **How to test**: Follow README on clean machine
  - ✅ **Expected**: Successful mod creation

- [ ] **DR2**: Example mods are included
  - ✅ **How to test**: Check examples/ folder
  - ✅ **Expected**: Working plugin and data pack examples

---

## 7. Release Checklist

Before tagging v0.1.0:

- [ ] All implementation tasks marked `[x]`
- [ ] All acceptance criteria verified
- [ ] CI/CD pipeline passing
- [ ] NuGet package published
- [ ] GitHub Release with binaries
- [ ] Example mods tested in MineWorld
- [ ] README complete
- [ ] CHANGELOG.md created
- [ ] Git tag: `v0.1.0`

---

## 8. Known Limitations & Future Work

### Known Limitations (v0.1)
- Only plugin and data (blocks) templates
- No validation command
- No resource/shader templates
- No packaging or installation commands

### Planned for v0.2
- `mwtool validate` command
- Resource pack template
- Multiple data types (items, recipes, biomes)
- Schema validation

---

## 9. References

- [Overall Roadmap](overall.md)
- [MineWorld Overall](https://github.com/DandelionBold/MineWorld/blob/main/docs/planning/overall.md)
- [BlockCore-SDK v0.1](https://github.com/DandelionBold/BlockCore-SDK/blob/main/docs/planning/v0.1.md)

---

**Document Status**: 🚧 Living document  
**Last Updated**: 2025-10-18  
**Next Review**: After Phase 1 completion

